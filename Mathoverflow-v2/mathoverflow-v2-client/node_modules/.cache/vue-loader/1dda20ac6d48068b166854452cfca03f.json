{"remainingRequest":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\src\\components\\users.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\src\\components\\users.vue","mtime":1671044664685},{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\master_projects\\Mathoverflow_master\\Mathoverflow-v2\\mathoverflow-v2-client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOw0KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7DQppbXBvcnQgeyBkZWxldGVBbnN3ZXIsIGRlbGV0ZVF1ZXN0aW9uLCBnZXRRdWVzdGlvbiwgZ2V0VXNlciwgcmVtb3ZlVXNlciB9IGZyb20gJy4vZnVuY3Rpb25zJzsNCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoew0KICAgIGRhdGE6ICgpID0+ICh7DQogICAgICAgIHVzZXJzOiBbeyBuYW1lOiAiaW9hbm5hIiB9LCB7IG5hbWU6ICJ0b2xpcyIgfSwgeyBuYW1lOiAiaW9hbm5hIiB9LCB7IG5hbWU6ICJ0b2xpcyIgfSwgeyBuYW1lOiAiaW9hbm5hIiB9LCB7IG5hbWU6ICJ0b2xpcyIgfV0sDQogICAgICAgIGFkbWluOiB0cnVlDQogICAgfSksDQogICAgd2F0Y2g6IHsNCiAgICAgICAgZ2V0VXNlcnMoKSB7DQoNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwR2V0dGVycyhbImdldFF1ZXN0aW9ucyIsICJnZXRVc2VycyJdKSwNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYXN5bmMgdXNlclByb2ZpbGUodXNlcjogYW55KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyLCAidGhlIHZhbHVlIG9mIGNsaWNrIHVzZXIiKTsNCiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIudXNlcl9pZDsNCiAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0VXNlcih1c2VySWQpOw0KICAgICAgICAgICAgY29uc29sZS5sb2codXNlckRhdGEsICJ0aGUgY2FyZCBkYXRhIik7DQogICAgICAgICAgICBzdG9yZS5jb21taXQoInNldFVzZXJEYXRhIiwgdXNlckRhdGEpOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy91c2VyJyk7DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlbGV0ZVVzZXIodmFsdWU6IGFueSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUsICJ0aGUgdmFsdWUgb2YgZGVsZXRlIHVzZXIiKQ0KICAgICAgICAgICAgLy93aGVuIGRlbGV0ZSB1c2VyIGRlbGV0ZSBhbGwgaGlzIHF1ZXN0aW9ucyBhbmQgYW5zd2Vycw0KICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25zID0gdGhpcy5nZXRRdWVzdGlvbnMNCiAgICAgICAgICAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25zKSB7DQogICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uLlVzZXJVc2VySWQgPT09IHZhbHVlLnVzZXJfaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25EYXRhID0gYXdhaXQgZ2V0UXVlc3Rpb24ocXVlc3Rpb24ucXVlc3Rpb25faWQpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXJzID0gcXVlc3Rpb25EYXRhLmFuc3dlcnM7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbnN3ZXJzLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhbnN3ZXIgb2YgcXVlc3Rpb25EYXRhLmFuc3dlcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZSB1c2VyJ3MgYW5zd2Vycw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUFuc3dlck9iamVjdCA9IGF3YWl0IGRlbGV0ZUFuc3dlcihhbnN3ZXIuYW5zd2VyX2lkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZSB0aGUgdXNlcidzIHF1ZXN0aW9ucw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVRdWVzdGlvbjEgPSBhd2FpdCBkZWxldGVRdWVzdGlvbihxdWVzdGlvbi5xdWVzdGlvbl9pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvL2FuZCB0aGVuIGRlbGV0ZSB1c2VyDQogICAgICAgICAgICBjb25zdCBkZWxldGVVc2VyT2JqZWN0ID0gYXdhaXQgcmVtb3ZlVXNlcih2YWx1ZS51c2VyX2lkKTsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCkNCiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGVVc2VycygpOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBmb3JjZVVwZGF0ZVVzZXJzKCkgew0KICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKDApDQogICAgICAgICAgICAvLyAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkNCiAgICAgICAgICAgIC8vIC8vIHRoaXMuZ2V0VXNlcnMNCiAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuJG5leHRUaWNrKCkNCiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCcvJykuY2F0Y2goKGVycjogYW55KSA9PiB7DQogICAgICAgICAgICAvLyAgICAgY29uc29sZS53YXJuKCdlcnJvciBpbiByZWRpcmVjdCB0byAvdXNlcnMgOicsIGVycikNCiAgICAgICAgICAgIC8vIH0pOw0KDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3VzZXJzJykuY2F0Y2goKGVycjogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdlcnJvciBpbiByZWRpcmVjdCB0byAvdXNlcnMgOicsIGVycikNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0sDQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmdldFVzZXJzOw0KICAgIH0NCn0pIC8vIG5hIG1wZWkgcGFnaW5hdGlvbiBrYXR3IGthdHcgc2UgcGVyaXB0d3NoIHBvbGx3biB1c2Vycw0K"},{"version":3,"sources":["users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"users.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <v-container fluid>\r\n        <v-card flat>\r\n            <v-toolbar flat>\r\n                <v-toolbar-title> Users </v-toolbar-title>\r\n                <v-spacer></v-spacer>\r\n                <v-icon>mdi-account-group</v-icon>\r\n            </v-toolbar>\r\n            <v-divider></v-divider>\r\n            <v-card-text>\r\n                <v-row class=\"mt-10\">\r\n                    <v-col\r\n                        cols=\"3\"\r\n                        class=\"mt-6\"\r\n                        v-for=\"(user, i) in this.getUsers\"\r\n                        :key=\"i\"\r\n                    >\r\n                        <v-card flat>\r\n                            <v-row>\r\n                                <v-col cols=\"5\" class=\"pa-0 mb-5\">\r\n                                    <v-img\r\n                                        contain\r\n                                        src=\"/prof_photo.png\"\r\n                                        @click=\"userProfile(user)\"\r\n                                        style=\"cursor: pointer\"\r\n                                    ></v-img>\r\n                                </v-col>\r\n                                <v-col class=\"pa-0\">\r\n                                    <!-- <v-card-title> Ioanna </v-card-title> -->\r\n                                    <v-card-text>\r\n                                        <h3\r\n                                            @click=\"userProfile(user)\"\r\n                                            style=\"cursor: pointer\"\r\n                                        >\r\n                                            {{ user.username }}\r\n                                        </h3>\r\n                                        <div>Greece</div>\r\n                                        <span v-if=\"admin\">\r\n                                            <v-btn\r\n                                                x-small\r\n                                                outlined\r\n                                                rounded\r\n                                                text\r\n                                                class=\"mt-5\"\r\n                                                @click=\"deleteUser(user)\"\r\n                                            >\r\n                                                <!-- <v-icon>mdi-delete</v-icon> -->\r\n                                                Delete User\r\n                                            </v-btn>\r\n                                        </span>\r\n                                    </v-card-text>\r\n\r\n                                    <!-- <v-card-actions> -->\r\n                                    <!-- </v-card-actions> -->\r\n                                </v-col>\r\n                            </v-row>\r\n                        </v-card>\r\n                    </v-col>\r\n                </v-row>\r\n            </v-card-text>\r\n        </v-card>\r\n    </v-container>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store';\r\nimport Vue from 'vue'\r\nimport { mapGetters } from 'vuex';\r\nimport { deleteAnswer, deleteQuestion, getQuestion, getUser, removeUser } from './functions';\r\nexport default Vue.extend({\r\n    data: () => ({\r\n        users: [{ name: \"ioanna\" }, { name: \"tolis\" }, { name: \"ioanna\" }, { name: \"tolis\" }, { name: \"ioanna\" }, { name: \"tolis\" }],\r\n        admin: true\r\n    }),\r\n    watch: {\r\n        getUsers() {\r\n\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\"getQuestions\", \"getUsers\"]),\r\n    },\r\n    methods: {\r\n        async userProfile(user: any) {\r\n            console.log(user, \"the value of click user\");\r\n            const userId = user.user_id;\r\n            const userData = await getUser(userId);\r\n            console.log(userData, \"the card data\");\r\n            store.commit(\"setUserData\", userData);\r\n            this.$router.push('/user');\r\n        },\r\n        async deleteUser(value: any) {\r\n            console.log(value, \"the value of delete user\")\r\n            //when delete user delete all his questions and answers\r\n            const questions = this.getQuestions\r\n            for (const question of questions) {\r\n                if (question.UserUserId === value.user_id) {\r\n                    const questionData = await getQuestion(question.question_id);\r\n                    const answers = questionData.answers;\r\n                    if (answers.length !== 0) {\r\n                        for (const answer of questionData.answers) {\r\n                            //delete user's answers\r\n                            const deleteAnswerObject = await deleteAnswer(answer.answer_id);\r\n                        }\r\n                    }\r\n                    //delete the user's questions\r\n                    const deleteQuestion1 = await deleteQuestion(question.question_id)\r\n                }\r\n            }\r\n            //and then delete user\r\n            const deleteUserObject = await removeUser(value.user_id);\r\n            await this.$nextTick()\r\n            this.forceUpdateUsers();\r\n        },\r\n        async forceUpdateUsers() {\r\n            // this.$router.go(0)\r\n            // // window.location.reload()\r\n            // // this.getUsers\r\n            // await this.$nextTick()\r\n            // this.$router.push('/').catch((err: any) => {\r\n            //     console.warn('error in redirect to /users :', err)\r\n            // });\r\n\r\n            this.$router.push('/users').catch((err: any) => {\r\n                console.warn('error in redirect to /users :', err)\r\n            });\r\n\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getUsers;\r\n    }\r\n}) // na mpei pagination katw katw se periptwsh pollwn users\r\n</script>"]}]}